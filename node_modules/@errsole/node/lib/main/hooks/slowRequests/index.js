'use strict';var a0_0x27dd7a=a0_0x181c;(function(_0x741488,_0x4ed4bf){var _0x8b433a=a0_0x181c,_0x6d66d0=_0x741488();while(!![]){try{var _0x27104e=-parseInt(_0x8b433a(0x1e9))/0x1+-parseInt(_0x8b433a(0x1ff))/0x2+-parseInt(_0x8b433a(0x1e5))/0x3+parseInt(_0x8b433a(0x201))/0x4+-parseInt(_0x8b433a(0x1e6))/0x5*(parseInt(_0x8b433a(0x204))/0x6)+parseInt(_0x8b433a(0x1f0))/0x7*(parseInt(_0x8b433a(0x1e3))/0x8)+parseInt(_0x8b433a(0x1e4))/0x9;if(_0x27104e===_0x4ed4bf)break;else _0x6d66d0['push'](_0x6d66d0['shift']());}catch(_0x1077d1){_0x6d66d0['push'](_0x6d66d0['shift']());}}}(a0_0x2734,0x37b06));const {v4:uuidv4}=require(a0_0x27dd7a(0x206));var Server=require(a0_0x27dd7a(0x1ec)),Events=require('../../eventCapture/events'),appConfig=require('../../../config'),SlowRequests={'requestsList':[],'currentClearingUTCDate':null,'currentClearingUTCHour':null,'addSlowHTTPRequest':function(_0x4efd89,_0x2914ec){var _0x12fffb=a0_0x27dd7a;try{var _0x2612b2='';_0x4efd89[_0x12fffb(0x1fe)]&&_0x4efd89[_0x12fffb(0x1fe)][_0x12fffb(0x1fc)]?_0x2612b2=_0x4efd89[_0x12fffb(0x1fe)][_0x12fffb(0x1fc)]:_0x4efd89[_0x12fffb(0x1ea)]&&_0x4efd89[_0x12fffb(0x1ea)][_0x12fffb(0x1f4)]&&(_0x2612b2=_0x4efd89[_0x12fffb(0x1ea)]['statusMessage']),_0x4efd89['request']&&(delete _0x4efd89['request'][_0x12fffb(0x1ee)],delete _0x4efd89['request'][_0x12fffb(0x1e0)]);var _0x55782e={'id':uuidv4(),'timestamp':new Date()[_0x12fffb(0x1fa)](),'method':_0x4efd89[_0x12fffb(0x205)][_0x12fffb(0x1fd)],'path':_0x4efd89[_0x12fffb(0x205)][_0x12fffb(0x1e8)],'routePath':_0x4efd89[_0x12fffb(0x205)][_0x12fffb(0x1f3)],'statusCode':_0x4efd89['response'][_0x12fffb(0x1ed)],'responseTime':_0x2914ec,'message':_0x2612b2,'data':_0x4efd89},_0x329807=checkRequestReset();_0x55782e['intervalDate']=_0x329807[_0x12fffb(0x207)],_0x55782e[_0x12fffb(0x1f7)]=_0x329807[_0x12fffb(0x1f7)],addSlowRequest(_0x55782e);}catch(_0x2074d9){console[_0x12fffb(0x1fe)](_0x2074d9);}},'sendSlowRequest':function(_0x1e38bf){var _0x126b82=a0_0x27dd7a;Events['emit'](Events[_0x126b82(0x1eb)],_0x1e38bf);}},checkRequestReset=function(){var _0xde3b90=a0_0x27dd7a,_0x2edfd4=new Date(),_0x39f330=(_0x2edfd4[_0xde3b90(0x209)](),_0x2edfd4['getUTCDate']()),_0x4c8d20=_0x2edfd4[_0xde3b90(0x1f1)]()+0x1,_0x56df47=_0x2edfd4[_0xde3b90(0x209)](),_0x10ce80=_0x2edfd4[_0xde3b90(0x1e2)](),_0x175209=_0x56df47+'-'+_0x4c8d20+'-'+_0x39f330,_0x133ce1=appConfig[_0xde3b90(0x202)](),_0x1db494=Math[_0xde3b90(0x1e1)](_0x10ce80/_0x133ce1)*_0x133ce1,_0x1da4c7=Math[_0xde3b90(0x1e1)](_0x10ce80/_0x133ce1)*_0x133ce1+'-'+(Math[_0xde3b90(0x1e1)](_0x10ce80/_0x133ce1)*_0x133ce1+_0x133ce1-0x1);return SlowRequests['currentClearingUTCDate']===_0x175209&&SlowRequests[_0xde3b90(0x1df)]===_0x1db494||(SlowRequests[_0xde3b90(0x203)]=_0x175209,SlowRequests['currentClearingUTCHour']=_0x1db494,SlowRequests['requestsList']=[]),{'intervalDate':_0x175209,'intervalRange':_0x1da4c7};},addSlowRequest=function(_0x3bb8bd){var _0x59ea05=a0_0x27dd7a,_0x4b4205=appConfig[_0x59ea05(0x20a)]();if(_0x3bb8bd[_0x59ea05(0x1fd)]&&_0x3bb8bd[_0x59ea05(0x1e8)]&&_0x3bb8bd['responseTime']){var _0x1c44cb=SlowRequests['requestsList'][_0x59ea05(0x200)](_0x68c76c=>_0x68c76c[_0x59ea05(0x1e8)]==_0x3bb8bd[_0x59ea05(0x1e8)]&&_0x68c76c['method']==_0x3bb8bd[_0x59ea05(0x1fd)]);SlowRequests[_0x59ea05(0x1e7)][_0x1c44cb]?SlowRequests[_0x59ea05(0x1e7)][_0x1c44cb]['responseTime']<_0x3bb8bd['responseTime']&&(SlowRequests[_0x59ea05(0x1e7)][_0x1c44cb]=_0x3bb8bd,Server[_0x59ea05(0x1f2)](Server[_0x59ea05(0x1f6)],[],_0x3bb8bd)['catch'](console['error'])):SlowRequests[_0x59ea05(0x1e7)][_0x59ea05(0x1f5)]<_0x4b4205?(SlowRequests[_0x59ea05(0x1e7)][_0x59ea05(0x1fb)](_0x3bb8bd),Server[_0x59ea05(0x1f2)](Server['SEND_SLOW_REQUEST'],[],_0x3bb8bd)[_0x59ea05(0x1f8)](console[_0x59ea05(0x1fe)])):SlowRequests['requestsList'][0x0][_0x59ea05(0x1ef)]<_0x3bb8bd[_0x59ea05(0x1ef)]&&(SlowRequests[_0x59ea05(0x1e7)][0x0]=_0x3bb8bd,Server[_0x59ea05(0x1f2)](Server[_0x59ea05(0x1f6)],[],_0x3bb8bd)['catch'](console[_0x59ea05(0x1fe)])),SlowRequests['requestsList'][_0x59ea05(0x1f9)]((_0x3cd028,_0x27d757)=>_0x3cd028[_0x59ea05(0x1ef)]-_0x27d757[_0x59ea05(0x1ef)]);}};SlowRequests[a0_0x27dd7a(0x208)]=function(_0xa9d7b7,_0x1b85ef){var _0x12fd77=a0_0x27dd7a;try{var _0x3eff7c={'method':_0xa9d7b7['method'],'path':_0xa9d7b7[_0x12fd77(0x1e8)],'responseTime':_0x1b85ef};checkRequestReset(),appConfig[_0x12fd77(0x20a)]();if(_0x3eff7c[_0x12fd77(0x1fd)]&&_0x3eff7c[_0x12fd77(0x1e8)]&&_0x3eff7c[_0x12fd77(0x1ef)]){var _0x160218=SlowRequests[_0x12fd77(0x1e7)][_0x12fd77(0x200)](_0x16b8d1=>_0x16b8d1[_0x12fd77(0x1e8)]==_0x3eff7c[_0x12fd77(0x1e8)]&&_0x16b8d1['method']==_0x3eff7c[_0x12fd77(0x1fd)]);if(SlowRequests[_0x12fd77(0x1e7)][_0x160218]&&SlowRequests[_0x12fd77(0x1e7)][_0x160218][_0x12fd77(0x1ef)]>=_0x3eff7c[_0x12fd77(0x1ef)])return!0x0;}return!0x1;}catch(_0xbca3f6){return console[_0x12fd77(0x1fe)](_0xbca3f6),!0x1;}},module['exports']=SlowRequests;function a0_0x181c(_0xda4f03,_0x5c3366){var _0x27345b=a0_0x2734();return a0_0x181c=function(_0x181c93,_0x5a52e3){_0x181c93=_0x181c93-0x1df;var _0x3e16cb=_0x27345b[_0x181c93];return _0x3e16cb;},a0_0x181c(_0xda4f03,_0x5c3366);}function a0_0x2734(){var _0x44db9e=['responseTime','241451IiYENN','getUTCMonth','call','routePath','statusMessage','length','SEND_SLOW_REQUEST','intervalRange','catch','sort','getTime','push','message','method','error','165130WczqSC','findIndex','163292TWzRfg','getSlowRequestsTimeInterval','currentClearingUTCDate','138pdrZrQ','request','uuid','intervalDate','checkSlowHTTPRequestExist','getUTCFullYear','getMaxRequestsInInterval','currentClearingUTCHour','files','floor','getUTCHours','80yFOLqt','4702572MlieQd','433473tupRSC','93485OgTOnz','requestsList','path','23072fRCOBr','response','ADD_HTTP_REQUEST_LOG','../../connection/server','statusCode','file'];a0_0x2734=function(){return _0x44db9e;};return a0_0x2734();}