'use strict';var a0_0x38473d=a0_0x5bca;(function(_0x4227d4,_0x365ff7){var _0x591a37=a0_0x5bca,_0x2b90b6=_0x4227d4();while(!![]){try{var _0x4c7bab=-parseInt(_0x591a37(0x1d0))/0x1+-parseInt(_0x591a37(0x1cc))/0x2+-parseInt(_0x591a37(0x1ba))/0x3*(-parseInt(_0x591a37(0x1d4))/0x4)+parseInt(_0x591a37(0x1b8))/0x5*(-parseInt(_0x591a37(0x1e7))/0x6)+-parseInt(_0x591a37(0x1ca))/0x7+parseInt(_0x591a37(0x1e9))/0x8*(-parseInt(_0x591a37(0x1c3))/0x9)+-parseInt(_0x591a37(0x1ec))/0xa*(-parseInt(_0x591a37(0x1d6))/0xb);if(_0x4c7bab===_0x365ff7)break;else _0x2b90b6['push'](_0x2b90b6['shift']());}catch(_0xf0f989){_0x2b90b6['push'](_0x2b90b6['shift']());}}}(a0_0x1420,0x19dc9));function a0_0x5bca(_0x437ba7,_0x270725){var _0x14201e=a0_0x1420();return a0_0x5bca=function(_0x5bcaef,_0x53b225){_0x5bcaef=_0x5bcaef-0x1b8;var _0x3e0a3f=_0x14201e[_0x5bcaef];return _0x3e0a3f;},a0_0x5bca(_0x437ba7,_0x270725);}const FS=require('fs'),Path=require(a0_0x38473d(0x1be)),{v4:uuidv4}=require('uuid');var Events=require(a0_0x38473d(0x1dc)),appConfig=require(a0_0x38473d(0x1c2)),pendingHTTPRequests=appConfig[a0_0x38473d(0x1e2)](),KoaHook={},isKoaWrapped=!0x1;function wrapKoa(_0x156dd2){return class{constructor(){var _0x1577b9=a0_0x5bca;return this[_0x1577b9(0x1c8)]=new _0x156dd2(),this[_0x1577b9(0x1c8)]['use'](errsoleWatcher),this[_0x1577b9(0x1c8)][_0x1577b9(0x1ee)](errsoleResponseCapture),this[_0x1577b9(0x1c8)]['on'](_0x1577b9(0x1e0),errsoleErrorHandler),this[_0x1577b9(0x1c8)];}};}function a0_0x1420(){var _0x4a6abd=['trim','toString','cookie','../../eventCapture/events','errsole','string','res','error','addWrappedPorts','getPendingHTTPRequests','forEach','split','nextTick','errsoleSessionId','6QHoeYu','close','394976cXxKcI','listen','emit','2680fURvLW','req','use','hrtime','isBuffer','210355QUfFqT','exports','3GnyZiZ','responseBody','unable\x20to\x20attach\x20error\x20watcher','koa','path','setupHandler','finish','set','../../../config','18SzOlNj','bigint','call','Response\x20not\x20available','REMOVE_HTTP_REQUEST_LOG','_app','_events','1426894wUvQiJ','responseTime','172160xdrgTR','packages','node','getSessionName','170227mxtUsU','ADD_HTTP_REQUEST_LOG','addMainProcessPort','write','423076FOPvKo','end','24673GDTbHA','headers','versions'];a0_0x1420=function(){return _0x4a6abd;};return a0_0x1420();}function wraplisten(_0x3c2b1e,_0x48cb7b){return function(){var _0x313921=a0_0x5bca,_0x4d2648=arguments[0x0];return appConfig[_0x313921(0x1d2)](_0x4d2648),appConfig[_0x313921(0x1e1)](_0x4d2648),_0x3c2b1e[_0x313921(0x1c5)](_0x48cb7b,...arguments);};}function errsoleErrorHandler(_0x1c1ff9,_0x2cfbf5){var _0x1d3773=a0_0x38473d;_0x2cfbf5['req']&&_0x2cfbf5[_0x1d3773(0x1ed)]['errsole']?_0x2cfbf5[_0x1d3773(0x1ed)][_0x1d3773(0x1dd)][_0x1d3773(0x1e0)]=_0x1c1ff9:_0x2cfbf5['req']&&(_0x2cfbf5[_0x1d3773(0x1ed)][_0x1d3773(0x1dd)]={},_0x2cfbf5['req'][_0x1d3773(0x1dd)]['error']=_0x1c1ff9);}async function errsoleWatcher(_0x5379af,_0x546722){var _0x5062f8=a0_0x38473d,_0xc6c798=_0x5379af[_0x5062f8(0x1ed)],_0x31de17=_0x5379af[_0x5062f8(0x1df)];_0xc6c798[_0x5062f8(0x1dd)]={},_0xc6c798[_0x5062f8(0x1dd)]['id']=uuidv4(),Events[_0x5062f8(0x1eb)](Events[_0x5062f8(0x1d1)],_0xc6c798);var _0x20b0cd,_0x4c39f8=process[_0x5062f8(0x1ef)]['bigint']();(_0x20b0cd=getErrsoleSessonId(_0xc6c798))||setErrsoleSessionId(_0x5379af,_0x20b0cd=uuidv4());var _0x4de11a=function(){var _0x27c612=_0x5062f8;_0xc6c798[_0x27c612(0x1dd)][_0x27c612(0x1cb)]=((process[_0x27c612(0x1ef)][_0x27c612(0x1c4)]()-_0x4c39f8)/0xf4240n)['toString'](),_0xc6c798['errsole'][_0x27c612(0x1e6)]=_0x20b0cd,Events[_0x27c612(0x1eb)](Events[_0x27c612(0x1c7)],_0xc6c798),Events['emit'](Events['HTTP_RESPONSE_SENT'],{'request':_0xc6c798,'response':_0x31de17});};if(!_0x31de17[_0x5062f8(0x1c9)])throw new Error(_0x5062f8(0x1bc));if(_0x31de17[_0x5062f8(0x1c9)][_0x5062f8(0x1c0)])_0x31de17['on'](_0x5062f8(0x1c0),_0x4de11a);else{if(!_0x31de17[_0x5062f8(0x1c9)][_0x5062f8(0x1e8)])throw new Error(_0x5062f8(0x1bc));_0x31de17['on'](_0x5062f8(0x1e8),_0x4de11a);}await _0x546722();}async function errsoleResponseCapture(_0x3a5fa8,_0x38fa2a){var _0x5f50da=a0_0x38473d,_0x5c3545=_0x3a5fa8[_0x5f50da(0x1ed)],_0xec09e8=_0x3a5fa8[_0x5f50da(0x1df)];_0x3a5fa8[_0x5f50da(0x1ed)][_0x5f50da(0x1dd)]||(_0x3a5fa8[_0x5f50da(0x1ed)][_0x5f50da(0x1dd)]={}),_0x5c3545[_0x5f50da(0x1dd)]['responseBody']='';var _0x4c926e=_0xec09e8[_0x5f50da(0x1d3)];if(_0xec09e8[_0x5f50da(0x1d3)]=function(_0x138974,_0x4a9eda,_0x4bd7d5){var _0x204e89=_0x5f50da;_0x138974?Buffer[_0x204e89(0x1f0)](_0x138974)?_0x5c3545[_0x204e89(0x1dd)][_0x204e89(0x1bb)]+=_0x138974[_0x204e89(0x1da)](_0x4a9eda):'string'==typeof _0x138974?_0x5c3545[_0x204e89(0x1dd)]['responseBody']+=_0x138974:_0x5c3545[_0x204e89(0x1dd)][_0x204e89(0x1bb)]=_0x204e89(0x1c6):_0x5c3545['errsole']['responseBody']+='',_0x4c926e[_0x204e89(0x1c5)](_0xec09e8,_0x138974,_0x4a9eda,_0x4bd7d5);},parseInt(process[_0x5f50da(0x1d8)][_0x5f50da(0x1ce)])>=0x8){var _0x43aef2=_0xec09e8[_0x5f50da(0x1d5)];_0xec09e8['end']=function(_0x16c3b0,_0x5dfc2b){var _0x5d4493=_0x5f50da;_0x16c3b0?Buffer['isBuffer'](_0x16c3b0)?_0x5c3545[_0x5d4493(0x1dd)][_0x5d4493(0x1bb)]+=_0x16c3b0[_0x5d4493(0x1da)](_0x5dfc2b):_0x5d4493(0x1de)==typeof _0x16c3b0?_0x5c3545[_0x5d4493(0x1dd)][_0x5d4493(0x1bb)]+=_0x16c3b0:_0x5c3545[_0x5d4493(0x1dd)][_0x5d4493(0x1bb)]=_0x5d4493(0x1c6):_0x5c3545[_0x5d4493(0x1dd)][_0x5d4493(0x1bb)]+='',_0x43aef2[_0x5d4493(0x1c5)](_0xec09e8,_0x16c3b0,_0x5dfc2b);};}await _0x38fa2a();}function getErrsoleSessonId(_0xd5a849){var _0x58a7b8=a0_0x38473d;try{if(!_0xd5a849['headers']||!_0xd5a849['headers'][_0x58a7b8(0x1db)])return null;var _0x491e5a=appConfig['getSessionName'](),_0x478b09=get_cookies(_0xd5a849)[_0x491e5a];if(_0x478b09)return _0x478b09;}catch(_0x4a86c4){return console[_0x58a7b8(0x1e0)](_0x4a86c4),null;}}function setErrsoleSessionId(_0x1d6b57,_0x392fcd){var _0x2b6169=a0_0x38473d;try{var _0xb97a3a=appConfig[_0x2b6169(0x1cf)]();_0x1d6b57['cookies'][_0x2b6169(0x1c1)](_0xb97a3a,_0x392fcd);}catch(_0x1c7361){console[_0x2b6169(0x1e0)](_0x1c7361);}}function get_cookies(_0x21dd19){var _0x3324e3=a0_0x38473d,_0x33fa42={};try{_0x21dd19[_0x3324e3(0x1d7)]&&_0x21dd19[_0x3324e3(0x1d7)]['cookie'][_0x3324e3(0x1e4)](';')[_0x3324e3(0x1e3)](function(_0x3c97ab){var _0x3c69fc=_0x3324e3,_0x52430d=_0x3c97ab['match'](/(.*?)=(.*)$/);_0x33fa42[_0x52430d[0x1]['trim']()]=(_0x52430d[0x2]||'')[_0x3c69fc(0x1d9)]();});}catch(_0x2bfe0e){}return _0x33fa42;}KoaHook[a0_0x38473d(0x1bf)]=function(_0x2c133c){var _0x3f7c11=a0_0x38473d;isKoaWrapped||(_0x2c133c[_0x3f7c11(0x1ee)](errsoleWatcher),_0x2c133c['use'](errsoleResponseCapture),_0x2c133c['listen']=wraplisten(_0x2c133c[_0x3f7c11(0x1ea)],_0x2c133c),process[_0x3f7c11(0x1e5)](function(){_0x2c133c['use'](errsoleErrorHandler);}));},KoaHook[a0_0x38473d(0x1cd)]=[{'name':a0_0x38473d(0x1bd),'wrapper':wrapKoa}],module[a0_0x38473d(0x1b9)]=KoaHook;