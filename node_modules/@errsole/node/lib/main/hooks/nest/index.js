'use strict';var a0_0x1e8b46=a0_0x2c9a;(function(_0x2a21c6,_0xd7f699){var _0x1177f4=a0_0x2c9a,_0x2715cd=_0x2a21c6();while(!![]){try{var _0x3d6ff7=-parseInt(_0x1177f4(0x1a3))/0x1*(parseInt(_0x1177f4(0x1c1))/0x2)+-parseInt(_0x1177f4(0x1c5))/0x3*(-parseInt(_0x1177f4(0x1c7))/0x4)+-parseInt(_0x1177f4(0x1c0))/0x5*(parseInt(_0x1177f4(0x198))/0x6)+-parseInt(_0x1177f4(0x199))/0x7*(-parseInt(_0x1177f4(0x1c4))/0x8)+parseInt(_0x1177f4(0x1bb))/0x9+parseInt(_0x1177f4(0x1b0))/0xa*(-parseInt(_0x1177f4(0x1be))/0xb)+parseInt(_0x1177f4(0x1b3))/0xc*(parseInt(_0x1177f4(0x19d))/0xd);if(_0x3d6ff7===_0xd7f699)break;else _0x2715cd['push'](_0x2715cd['shift']());}catch(_0x2994d2){_0x2715cd['push'](_0x2715cd['shift']());}}}(a0_0x2fd2,0x63c2b));function a0_0x2c9a(_0x5d0af0,_0x1145da){var _0x2fd2b0=a0_0x2fd2();return a0_0x2c9a=function(_0x2c9a39,_0x1688be){_0x2c9a39=_0x2c9a39-0x196;var _0x4a719e=_0x2fd2b0[_0x2c9a39];return _0x4a719e;},a0_0x2c9a(_0x5d0af0,_0x1145da);}function a0_0x2fd2(){var _0x2bffe8=['session','398lGnpLB','cookie','getSessionName','isBuffer','express-session','unable\x20to\x20attach\x20error\x20watcher','use','string','../../../config','end','headers','split','exports','20clkLHu','REMOVE_HTTP_REQUEST_LOG','match','12IyDRSW','path','versions','emit','forEach','toString','write','uuid','6225201CBXRLu','trim','setPrototypeOf','2848450zsdWkB','responseBody','181285sTPVPG','1608yNHdPi','sessionID','hrtime','5678000cdnaSx','20901KidAqQ','listen','164fwDoeX','errsole','errsoleSessionId','addWrappedPorts','132doLFvr','7ozZzeN','bigint','close','error','4642027cqHQsR','_events','call','Response\x20not\x20available','HTTP_RESPONSE_SENT'];a0_0x2fd2=function(){return _0x2bffe8;};return a0_0x2fd2();}const FS=require('fs'),Path=require(a0_0x1e8b46(0x1b4)),{v4:uuidv4}=require(a0_0x1e8b46(0x1ba));var Events=require('../../eventCapture/events'),appConfig=require(a0_0x1e8b46(0x1ab)),pendingHTTPRequests=appConfig['getPendingHTTPRequests'](),NestHook={};function wrapExpressInNest(_0x5cd96d){var _0x108656=a0_0x1e8b46,_0x5255ed=function(){var _0x34f54d=a0_0x2c9a,_0xea17d9=_0x5cd96d();return _0xea17d9[_0x34f54d(0x1a9)](errsoleWatcher),_0xea17d9[_0x34f54d(0x1a9)](errsoleResponseCapture),_0xea17d9[_0x34f54d(0x1c6)]=wraplisten(_0xea17d9[_0x34f54d(0x1c6)],_0xea17d9),_0xea17d9;};return Object[_0x108656(0x1bd)](_0x5255ed,_0x5cd96d),_0x5255ed;}function wraplisten(_0x1f2b3b,_0x69cacf){return function(){var _0x1a6da0=a0_0x2c9a,_0x50af63=arguments[0x0];return appConfig['addMainProcessPort'](_0x50af63),appConfig[_0x1a6da0(0x197)](_0x50af63),_0x1f2b3b[_0x1a6da0(0x19f)](_0x69cacf,...arguments);};}function wrapExpressSessionInNest(_0x433237){var _0x110af5=a0_0x1e8b46,_0x4d2b0a=function(_0x5205a9){var _0x617a46=_0x433237(_0x5205a9);return function(_0x41aed1,_0x5968b0,_0xf08b0b){_0x617a46(_0x41aed1,_0x5968b0,function(_0x435c55){var _0x5a8f36=a0_0x2c9a;_0x41aed1[_0x5a8f36(0x1c2)]&&(_0x41aed1['errsole'][_0x5a8f36(0x1a2)]={'sid':_0x41aed1[_0x5a8f36(0x1c2)],'session':_0x41aed1[_0x5a8f36(0x1a2)]}),_0xf08b0b(_0x435c55);});};};return Object[_0x110af5(0x1bd)](_0x4d2b0a,_0x433237),_0x4d2b0a;}function errsoleWatcher(_0x34fa8d,_0x4decc9,_0xec1df){var _0x1bc818=a0_0x1e8b46;_0x34fa8d['errsole']={},_0x34fa8d[_0x1bc818(0x1c8)]['id']=uuidv4(),Events[_0x1bc818(0x1b6)](Events['ADD_HTTP_REQUEST_LOG'],_0x34fa8d);var _0xc8b3df=process[_0x1bc818(0x1c3)][_0x1bc818(0x19a)]();if(!(_0x282252=getErrsoleSessonId(_0x34fa8d))){var _0x282252=uuidv4();_0x4decc9=setErrsoleSessionId(_0x4decc9,_0x282252);}var _0x5108ba=function(){var _0x2fb1c1=_0x1bc818;_0x34fa8d[_0x2fb1c1(0x1c8)]['responseTime']=((process[_0x2fb1c1(0x1c3)]['bigint']()-_0xc8b3df)/0xf4240n)[_0x2fb1c1(0x1b8)](),_0x34fa8d[_0x2fb1c1(0x1c8)][_0x2fb1c1(0x196)]=_0x282252,Events[_0x2fb1c1(0x1b6)](Events[_0x2fb1c1(0x1b1)],_0x34fa8d),Events[_0x2fb1c1(0x1b6)](Events[_0x2fb1c1(0x1a1)],{'request':_0x34fa8d,'response':_0x4decc9});};if(!_0x4decc9['_events'])throw new Error(_0x1bc818(0x1a8));if(_0x4decc9[_0x1bc818(0x19e)]['finish'])_0x4decc9['on']('finish',_0x5108ba);else{if(!_0x4decc9['_events'][_0x1bc818(0x19b)])throw new Error(_0x1bc818(0x1a8));_0x4decc9['on'](_0x1bc818(0x19b),_0x5108ba);}_0xec1df();}function errsoleResponseCapture(_0x26bc1f,_0x1c7209,_0x4c7186){var _0x4b2733=a0_0x1e8b46;_0x26bc1f[_0x4b2733(0x1c8)][_0x4b2733(0x1bf)]='';var _0x12a0a3=_0x1c7209[_0x4b2733(0x1b9)];if(_0x1c7209['write']=function(_0x345f86,_0x3f1bc8,_0x3bc773){var _0x6bd30f=_0x4b2733;_0x345f86?Buffer[_0x6bd30f(0x1a6)](_0x345f86)?_0x26bc1f['errsole'][_0x6bd30f(0x1bf)]+=_0x345f86[_0x6bd30f(0x1b8)](_0x3f1bc8):_0x6bd30f(0x1aa)==typeof _0x345f86?_0x26bc1f['errsole'][_0x6bd30f(0x1bf)]+=_0x345f86:_0x26bc1f[_0x6bd30f(0x1c8)]['responseBody']=_0x6bd30f(0x1a0):_0x26bc1f[_0x6bd30f(0x1c8)][_0x6bd30f(0x1bf)]+='',_0x12a0a3[_0x6bd30f(0x19f)](_0x1c7209,_0x345f86,_0x3f1bc8,_0x3bc773);},parseInt(process[_0x4b2733(0x1b5)]['node'])>=0x8){var _0x1821a4=_0x1c7209[_0x4b2733(0x1ac)];_0x1c7209[_0x4b2733(0x1ac)]=function(_0x2558ab,_0x3456d3){var _0x3a8127=_0x4b2733;_0x2558ab?Buffer[_0x3a8127(0x1a6)](_0x2558ab)?_0x26bc1f[_0x3a8127(0x1c8)][_0x3a8127(0x1bf)]+=_0x2558ab[_0x3a8127(0x1b8)](_0x3456d3):_0x3a8127(0x1aa)==typeof _0x2558ab?_0x26bc1f[_0x3a8127(0x1c8)]['responseBody']+=_0x2558ab:_0x26bc1f[_0x3a8127(0x1c8)][_0x3a8127(0x1bf)]=_0x3a8127(0x1a0):_0x26bc1f[_0x3a8127(0x1c8)][_0x3a8127(0x1bf)]+='',_0x1821a4[_0x3a8127(0x19f)](_0x1c7209,_0x2558ab,_0x3456d3);};}_0x4c7186();}function getErrsoleSessonId(_0x2b3051){var _0x1de0de=a0_0x1e8b46;try{if(!_0x2b3051[_0x1de0de(0x1ad)]||!_0x2b3051[_0x1de0de(0x1ad)][_0x1de0de(0x1a4)])return null;var _0x498afc=appConfig[_0x1de0de(0x1a5)](),_0x123da3=get_cookies(_0x2b3051)[_0x498afc];if(_0x123da3)return _0x123da3;}catch(_0x470b0c){return console[_0x1de0de(0x19c)](_0x470b0c),null;}}function setErrsoleSessionId(_0x3157ef,_0x14e23c){var _0x1a977b=a0_0x1e8b46;try{var _0x16cd2e=appConfig['getSessionName']();_0x3157ef['cookie'](_0x16cd2e,_0x14e23c);}catch(_0x5173ab){console[_0x1a977b(0x19c)](_0x5173ab);}return _0x3157ef;}function get_cookies(_0x2ec835){var _0xc49a72=a0_0x1e8b46,_0x2c5b1d={};try{_0x2ec835[_0xc49a72(0x1ad)]&&_0x2ec835[_0xc49a72(0x1ad)][_0xc49a72(0x1a4)][_0xc49a72(0x1ae)](';')[_0xc49a72(0x1b7)](function(_0x258d49){var _0x43914e=_0xc49a72,_0x574e5f=_0x258d49[_0x43914e(0x1b2)](/(.*?)=(.*)$/);_0x2c5b1d[_0x574e5f[0x1][_0x43914e(0x1bc)]()]=(_0x574e5f[0x2]||'')[_0x43914e(0x1bc)]();});}catch(_0x447735){}return _0x2c5b1d;}NestHook['packages']=[{'name':'express','wrapper':wrapExpressInNest},{'name':a0_0x1e8b46(0x1a7),'wrapper':wrapExpressSessionInNest}],module[a0_0x1e8b46(0x1af)]=NestHook;